# Speckit Driver Pro - Configuration Schema
# 文件: spec-driver.config.yaml
# 位置: 项目根目录 或 .specify/spec-driver.config.yaml

# 模型预设
# 可选值: balanced | quality-first | cost-efficient
# balanced（默认）: 重分析用 Opus，执行用 Sonnet
# quality-first: 全部用 Opus
# cost-efficient: 大部分用 Sonnet
preset: balanced

# 子代理模型配置（覆盖预设）
# 每个子代理可独立配置 model 字段
# 可选值: opus | sonnet
agents:
  product-research:
    model: opus
  tech-research:
    model: opus
  specify:
    model: opus
  clarify:
    model: sonnet
  checklist:
    model: sonnet
  plan:
    model: opus
  tasks:
    model: sonnet
  analyze:
    model: opus
  implement:
    model: sonnet
  verify:
    model: sonnet

# 验证阶段配置
verification:
  # 自定义构建/Lint/测试命令
  # 键名为语言标识（小写），覆盖自动检测的默认命令
  commands:
    # typescript:
    #   build: "npm run build"
    #   lint: "npm run lint"
    #   test: "npm test"
    # python:
    #   lint: "ruff check ."
    #   test: "pytest -v"

  # Monorepo 检测
  monorepo:
    enabled: true  # 是否启用 Monorepo 子项目检测

# 质量门配置
quality_gates:
  # WARNING 级别发现时自动继续（不暂停）
  auto_continue_on_warning: true
  # CRITICAL 级别发现时暂停（不可关闭）
  pause_on_critical: true

# 子代理重试策略
retry:
  # 最大重试次数（失败后自动重试）
  max_attempts: 2

# 进度输出配置
progress:
  # 阶段开始/完成时输出进度信息
  show_stage_progress: true
  # 阶段完成时输出关键产出摘要
  show_stage_summary: true
